name: Test Setup

on:
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - uses: actions/setup-python@v4
      with:
        python-version: '3.11'
    
    - name: Test environment
      env:
        PRINTFUL_API_KEY: ${{ secrets.PRINTFUL_API_KEY }}
        PRINTFUL_STORE_ID: ${{ secrets.PRINTFUL_STORE_ID }}
      run: |
        echo "üîç Testing setup..."
        echo "Repository: ${{ github.repository }}"
        echo "Pages URL: https://${{ github.repository_owner }}.github.io/${{ github.event.repository.name }}/"
        
        # Check secrets
        echo ""
        echo "Checking secrets:"
        [ -n "$PRINTFUL_API_KEY" ] && echo "‚úÖ PRINTFUL_API_KEY is set" || echo "‚ùå PRINTFUL_API_KEY missing"
        [ -n "$PRINTFUL_STORE_ID" ] && echo "‚úÖ PRINTFUL_STORE_ID is set" || echo "‚ùå PRINTFUL_STORE_ID missing"
        [ -n "${{ secrets.OPENAI_API_KEY }}" ] && echo "‚úÖ OPENAI_API_KEY is set" || echo "‚ùå OPENAI_API_KEY missing"
        [ -n "${{ secrets.MARKUP_PERCENT }}" ] && echo "‚úÖ MARKUP_PERCENT is set" || echo "‚ùå MARKUP_PERCENT missing"
        
        # Test Python
        echo ""
        echo "Testing Python:"
        pip install requests
        python -c "import requests; print('‚úÖ Python and requests working')"
